{"version":3,"sources":["../src/utils/mongoose.ts"],"names":["mongoose","connection","on","logger","info","error","once","disconnect","catch","connect","environment","MONGO_DATABASE_URL","connectToMongo","exit"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,cAAc;AAMrBA,SAASC,WAAWC,GAAG,cAAc,MAAM;AACzCC,SAAOC,KAAK,uBAAA;AACd,CAAA;AAEAJ,SAASC,WAAWC,GAAG,SAAS,CAACG,UAAU;AACzCF,SAAOE,MAAM,+BAA+BA,KAAAA;AAC9C,CAAA;AAEAL,SAASC,WAAWC,GAAG,aAAa,MAAM;AACxCC,SAAOC,KAAK,mBAAA;AACd,CAAA;AAEAJ,SAASC,WAAWK,KAAK,QAAQ,MAAM;AACrCH,SAAOC,KAAK,2BAAA;AACd,CAAA;AAEAJ,SAASC,WAAWC,GAAG,eAAe,MAAM;AAC1CC,SAAOC,KAAK,qBAAA;AACd,CAAA;AAEAJ,SAASC,WAAWC,GAAG,gBAAgB,MAAM;AAC3CC,SAAOC,KAAK,sBAAA;AACd,CAAA;AAEA,IAAMG,aAAa,6BAAM;AACvB,SAAOP,SAASO,WAAU,EAAGC,MAAM,MAAM,MAAK;AAChD,GAFmB;AAInB,IAAMC,UAAU,6BAAM;AACpB,SAAOT,SAASS,QAAQC,YAAYC,kBAAkB;AACxD,GAFgB;AAIT,IAAMC,iBAAiB,mCAAY;AACxC,QAAML,WAAAA;AAEN,QAAME,QAAAA,EACHD,MAAM,MAAMC,QAAAA,CAAAA,EACZD,MAAM,MAAMK,KAAAA,CAAAA;AACjB,GAN8B","sourcesContent":["import mongoose from \"mongoose\";\n\nimport { environment } from \"./environment\";\nimport { logger } from \"./logger\";\nimport { exit } from \"./process\";\n\nmongoose.connection.on(\"connecting\", () => {\n  logger.info(\"connecting to MongoDb\");\n});\n\nmongoose.connection.on(\"error\", (error) => {\n  logger.error(\"error in MongoDb connection\", error);\n});\n\nmongoose.connection.on(\"connected\", () => {\n  logger.info(\"MongoDB connected\");\n});\n\nmongoose.connection.once(\"open\", () => {\n  logger.info(\"MongoDB connection opened\");\n});\n\nmongoose.connection.on(\"reconnected\", () => {\n  logger.info(\"MongoDB reconnected\");\n});\n\nmongoose.connection.on(\"disconnected\", () => {\n  logger.info(\"MongoDB disconnected\");\n});\n\nconst disconnect = () => {\n  return mongoose.disconnect().catch(() => void 0);\n};\n\nconst connect = () => {\n  return mongoose.connect(environment.MONGO_DATABASE_URL);\n};\n\nexport const connectToMongo = async () => {\n  await disconnect();\n\n  await connect()\n    .catch(() => connect())\n    .catch(() => exit());\n};\n"]}